<!DOCTYPE html>

<html>
	
	<!--Page head: Contains CSS and Title-->
	<head>
	<link rel="icon" type="image/png" href="/images/favicon.png">
	<!--Importing CSS-->
	<link rel="stylesheet" type="text/css" media="screen"  
      href="/css/LostNFoundStyle.css"/>
	
	<title>Add an Item</title>	
	
	<script>
		function validateForm(form){
			var alertMsg = "";

			if (form.itemDescriptionPublic.value === ""){
				alertMsg = alertMsg + "Warning: Public Description is required.\n";
			}
			
			if (form.itemLocationFound.value === ""){
				alertMsg = alertMsg + "Warning: Location Found is required.\n"
			} 
			/*
			var radioLength = document.forms[form].category.length;
			var isChecked = false;
			for (int i = 0; i < radioLength; i++){
				if (document.getElementsByName(form)[i].category.checked){
					isChecked = true;
				}
			}
			if (!isChecked){
				alertMsg = alertMsg + "Category must not be empty.\n"
			}
			*/
			var isChecked = false;
			var nodeList = document.getElementsByTagName('input');
			for (var i = 0; i < nodeList.length; i++){
				var node = nodeList[i];

				if (node.getAttribute('type') == 'radio'){
					if (node.checked){
						isChecked = true;
					}
				}
			}
			if (!isChecked){
				alertMsg = alertMsg + "Warning: Category is required.\n"
			}
			
			//A lost item cannot be entered if it was found after today's date
			var todaysDate = new Date();
			//A lost item cannot be entered if it was found before this date
			var pastDate = new Date("2012-01-01")
			//The date which user stated the item was found
			var dateFound = form.itemDateFound.value;
			//If the item was 'found' after today's date
			if(Date.parse(todaysDate) < Date.parse(dateFound)){
				alertMsg = alertMsg + "Warning: Date Found is invalid."
			}
			//If the item was 'found' before '2015-01-01'
			else if(Date.parse(pastDate) > Date.parse(dateFound)){
				alertMsg = alertMsg + "Warning: Date Found is invalid (before 2012)."
			}
			//If the item's date found has not been entered
			else if(!dateFound){
				alertMsg = alertMsg + "Warning: Date Found is required."
			}
			
			//If there were no errors, return
			if (alertMsg === ""){
				return true;
			}

			alert(alertMsg);
			return false;
		}
	</script>
	</head>

	<!--Page body: Contains the form for an admin to add a new item-->
	<body id = "backgrund">
		<!--Page top-->
		<img id = "banner" src = "/images/banner.png"  >
		
		<p class = "welcome"> Welcome, Administrator <span class = "moveRight"> <a href = "/"> Home</a></span> </p>
		
		<div class = "autoAlign">
			<!--Title Header: Add an Item-->
			<h1>Add an Item</h1>
			<br>

			<!--Form-->
			<form name="addItemForm" action="/item/addItem" onSubmit="return validateForm(this)" method="post" enctype="multipart/form-data">
				<input type="hidden" name="status" value="lost">
				<label class="formLabels">Image</label> <input id="itemPic" class="inputValues" type="file" name="itemPic" accept="image/*">
				<br>
				<label class="formLabels">Public Description: </label> <br> <textarea id="itemDescriptionPublic" class="inputValues" type="text" name="itemDescriptionPublic" rows="5" cols="50"></textarea>
				<br>
				<label class="formLabels">Private Description: </label> <br> <textarea id="itemDescriptionPrivate" class="inputValues" type="text" name="itemDescriptionPrivate" rows="5" cols="50"></textarea>
				<br>
				<label class="formLabels">Location Found: </label> <br> <textarea id="itemLocationFound" class="inputValues" type="text" name="itemLocationFound" rows="5" cols="50" maxlength="255"></textarea>
				<br>
				<label class="formLabels">Category</label> <br>
					<label><input id="categoryCellPhone" class="inputValues" type="radio" name="category" value="cellphone"> Cell Phone</label>
					<label><input id="categoryHeadphones" class="inputValues" type="radio" name="category" value="headphones"> Headphones</label>
				 	<label><input id="categoryWallet" class="inputValues" type="radio" name="category" value="wallet"> Wallet</label>
					<label><input id="categoryKeys" class="inputValues" type="radio" name="category" value="keys"> Keys</label><br>
					<label><input id="categoryBooks" class="inputValues" type="radio" name="category" value="books"> Books</label>
					<label><input id="categoryGlasses" class="inputValues" type="radio" name="category" value="glasses"> Glasses</label>
					<label><input id="categoryMiscellaneous" class="inputValues" type="radio" name="category" value="miscellaneous"> Miscellaneous</label>
				<br>
				<label class="formLabels">Date Found</label> <input id="itemDateFound" class="inputValues" type="date" name="itemDateFound">
				<br>
				<input id="submit" class="inputValues" type="submit" name="submit" value="Submit">
			</form>
		</div>

	<!--Page footer-->
	<footer class = "footer">
		
		<img  id = "ricLogo" src = "/images/riclogo_footer_156px.png">
		
		<p class = "contact"> <a href = ""> Contact Us </a> &ensp; <a href = ""> FAQs </a> </p>
		
	</footer>
	</body>

</html>